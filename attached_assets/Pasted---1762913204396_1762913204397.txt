الهدف: بعد التأكد من أن جدول اليوم يظهر بشكل صحيح في لوحة السائس، ما زال نظام الحضور التقليدي موجوداً في التطبيق ويتداخل مع الجدولة اليومية. نريد إزالة هذا النظام بالكامل والتأكد من أن جميع الروابط والدوال والإحصائيات تعتمد فقط على الجدولة اليومية.

المهام المطلوب تنفيذها:

جرد مكونات الحضور التقليدي

استخدم البحث داخل المشروع للعثور على جميع الملفات والصفوف المرتبطة بـ AttendanceDay, Attendance, ProjectAttendance, ShiftAssignment, attendance_service.py, وجميع ملفات القوالب التي تحتوي على “attendance” في اسمها (projects/attendance.html, projects/attendance_list.html, وغيرها).

حدد المسارات في main.py ومسارات أخرى تستدعي هذه الخدمات (مثل /projects/<project_id>/attendance, /attendance/record, /attendance/report, /shifts, /shift_assignments، إلخ).

تحليل التبعيات والتأثير

تتبَّع كل استدعاء لهذه النماذج أو الخدمات في أجزاء أخرى من الكود (مثل تقرير الحضور اليومي، بطاقات الإحصاء في لوحات التحكم) لتعرف إن كانت تعتمد على الحضور التقليدي.

إذا كانت هناك وظائف أو صفحات ستتعطل بإزالة هذه المكوّنات، حدِّد كيفية تعديلها أو إخفائها إلى حين تطوير نظام بديل.

إزالة/تعطيل النظام

بعد التأكد من عدم وجود اعتماد ضروري، قم بحذف أو تعطيل:

النماذج المرتبطة بالحضور التقليدي (أو علِّقها مع توضيح سبب تعليقها).

المسارات (routes) التي تقدم صفحات أو واجهات للحضور.

الخدمات والـ Blueprints الخاصة بالحضور.

القوالب والملفات الثابتة (JS/CSS) التي لم تعد مستخدمة.

حدِّث ملف __init__.py وأي تسجيل للـ Blueprints حتى لا يُحمل ما تم إزالته.

تحديث الواجهات والإحصائيات

أزِل أي روابط في القوائم أو أزرار في الصفحات تشير إلى “الحضور” أو “Attendance” التقليدي.
- في لوحات التحكم التي تعرض إحصائيات الحضور، قم بإما إزالة تلك البطاقات أو تعديلها لاحقاً للاعتماد على إحصائيات الجدولة اليومية.

اختبار شامل

بعد الإزالة، شغّل التطبيق وتصفح جميع الصفحات (السائس، المشروع، المشرف، الإدارة) للتأكد من عدم وجود أخطاء 404 أو 500 نتيجة حذف تلك المسارات.
- تحقق أن الجدولة اليومية تعمل بكفاءة في تسجيل الحضور للحارس واستبدال التحضير التقليدي.
- أكِّد عدم وجود استدعاءات لنماذج أو جداول تم حذفها، أو عمليات ترحيل (migration) تحتاج للتعديل.