الغرض: حذف كل ما يتعلق بنظام الحضور التقليدي من المشروع، مع التحقق من عدم وجود تبعيات تؤثر على باقي الوظائف، بحيث يظل نظام الجدولة اليومية هو الآلية الوحيدة لتسجيل حضور السائسين.

المهام المطلوبة:

تحديد مكوّنات النظام التقليدي للحضور:

راجع ملفات النماذج (models.py وmodels_attendance_reporting.py) وحدد الكيانات المرتبطة بالحضور التقليدي مثل AttendanceDay, AttendanceRecord, Shift, ShiftAssignment, AttendanceStatus وأي نماذج أخرى غير مرتبطة بالجدولة اليومية أو بنظام الإسناد الحالي.

راجع المسارات (attendance_reporting_routes.py) والقوالب (reports/attendance/…) والخدمات (attendance_reporting_services.py) التي تُعنى بعرض تقارير أو صفحات الحضور التقليدي.

تحليل التبعيات:

استخدم البحث داخل المشروع لرصد أي استدعاءات لهذه النماذج أو الخدمات في ملفات أخرى (مثلاً في dashboard_api_routes.py أو main.py) والتأكد من عدم وجود تقارير أو إحصائيات تعتمد عليها.

إذا وُجدت أجزاء تعرض إحصائيات عامة للحضور (مثل بطاقات “اتجاهات الحضور” في لوحة المدير)، قرر ما إذا كان يمكن تعطيلها مؤقتًا أو تعديلها لتستخدم نظام الجدولة اليومية.

إزالة المكوّنات غير المطلوبة:

بعد التأكد من عدم وجود تبعيات، احذف النماذج والموديلات غير الضرورية أو علّقها (comment out) إذا لزم الأمر لتسهيل التراجع.

احذف المسارات والقوالب والخدمات الخاصة بتقارير الحضور التقليدي. تأكد من تحديث ملف __init__.py أو ملفات التسجيل (blueprint registration) لإزالة استيراد أي blueprint خاص بالحضور.

عدّل أي صفحات أو أجزاء في الواجهة كانت تعرض هذه التقارير، بحيث لا تُظهر روابط أو أزرار مرتبطة بالحضور التقليدي.

تحديث التبعيات المتبقية:

إذا كانت هناك دوال أو مخططات في لوحة المدير أو الإدارة تعتمد على إحصائيات الحضور التقليدي، قم بتحويلها للاعتماد على الجدولة اليومية أو قم بإخفائها مؤقتًا لحين تطوير نظام الحضور المتقدم.

تأكد من أنّ نظام الإشعارات، ونظام الجدولة اليومية، والخدمات الأخرى لا تحاول إنشاء سجلات في الجداول المحذوفة.

اختبار شامل:

بعد تنفيذ التغييرات، قم بتشغيل التطبيق محليًا واختبر:

عرض لوحة السائس والمشرف والإدارة العامة للتأكد من عدم وجود أخطاء تتعلق بغياب جداول الحضور التقليدي.

إرسال واستلام التقارير ضمن الجدولة اليومية والتأكد من أنّ الإحصائيات المتعلقة بالحضور لا تظهر أو تعمل بشكل صحيح إذا تم تعديلها.

افحص سجل الهجرة (migrations) للتأكد من أنّ الجداول المحذوفة لا تُنشأ في قاعدة البيانات في الإصدارات القادمة.

ملاحظة: لا تقم بحذف أي شيء إلا بعد التأكد من عدم وجود استخدام آخر له داخل النظام. يُفضّل إجراء العملية على فرع تطوير منفصل ثم دمجه بعد الاختبار، حتى لا يحدث تعطل مفاجئ في البيئة الإنتاجية.