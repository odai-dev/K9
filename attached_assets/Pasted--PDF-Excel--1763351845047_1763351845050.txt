الآن بعد تنفيذ إصلاحات الصلاحيات، الجدولة اليومية، تقارير الفترات، والتقارير PDF/Excel،
أريد منك تنفيذ فحص تشغيلي كامل (End-to-End Scenario) لنظام K9 وكأننا شركة حقيقية نستخدم النظام في العمل اليومي، مع إصلاح أي مشكلة تظهر.

لا أريد منك إضافة ميزات جديدة، فقط:

تشغيل النظام فعليًا

المرور بجميع الأدوار والواجهات

واكتشاف وإصلاح الأخطاء أو التعارضات أو السلوك غير الصحيح

المطلوب كالآتي:

1) سيناريو المدير العام (GENERAL_ADMIN)

تسجيل الدخول كمدير عام.

التأكد من:

ظهور كل الشاشات والواجهات التي يجب أن يراها المدير العام.

عدم وجود شاشات مكسورة أو روابط تؤدي إلى 404 أو 500.

تنفيذ الخطوات التالية:

إنشاء مشروع جديد.

إضافة المواقع الخاصة بالمشروع.

إنشاء حساب مسؤول مشروع مرتبط بهذا المشروع.

إنشاء حساب سائس واحد على الأقل وربطه بالمشروع وبكلب مناسب.

إعطاء الصلاحيات من “إدارة الصلاحيات”:

إعطاء مسؤول المشروع صلاحيات إدارة الجدولة والتقارير لمشروعه.

إعطاء السائس صلاحياته الأساسية (الجدول، تقارير الفترات، التقرير اليومي).

التأكد أن:

الصلاحيات تُحفظ فعليًا في قاعدة البيانات.

تُطبّق فعليًا على الحسابات.

تظهر في واجهات المستخدم عند تسجيل الدخول.

إذا ظهرت أي مشكلة في هذه المرحلة (صلاحيات لا تُطبّق، صفحات لا تظهر، روابط مكسورة) يجب عليك إصلاحها فورًا.

2) سيناريو مسؤول المشروع (PROJECT_MANAGER)

تسجيل الدخول بحساب مسؤول المشروع الذي أنشأه المدير العام.

التأكد أن:

واجهة مسؤول المشروع تظهر بشكل صحيح.

لا تظهر له شاشات لا يملك صلاحيتها.

من داخل واجهته:

اختيار المشروع الذي يديره.

إنشاء جدولة يومية للسائس (واحدة أو أكثر) لليوم التالي:

اختيار السائس

اختيار الكلب

اختيار الموقع

تحديد وقت البداية والنهاية

حفظ الجدول دون أخطاء.

التأكد من:

أن الجدول محفوظ في قاعدة البيانات.

أن هذا الجدول سيكون مرئيًا للسائس في اليوم المحدد.

الدخول لصفحة تقارير الفترات:

التأكد أنه يمكنه رؤية تقارير السائس المرتبطة بمشروعه فقط.

قبول/رفض تقرير تجربة.

أي خطأ يظهر (صفحة فارغة، تقرير لا يرتبط بالجدولة الصحيحة، صلاحية مفقودة) يجب إصلاحه مباشرة.

3) سيناريو السائس (HANDLER)

تسجيل الدخول بحساب السائس الذي تم إنشاؤه له وجدولته.

التأكد أن:

تظهر لوحة تحكم السائس.

يظهر “قسم جدول اليوم” بالجدول الذي أنشأه مسؤول المشروع (وليس في آخر الإشعارات).

لا يرى أي شاشات لا يملك صلاحيتها.

من “جدول اليوم”:

فتح وردية معينة.

رفع تقرير الفترة لهذه الوردية.

رفع تقرير نهاية اليوم.

التأكد من:

حفظ تقارير الفترات والتقرير اليومي في قاعدة البيانات بشكل صحيح.

ربطها بالوردية الصحيحة، الكلب الصحيح، المشروع الصحيح.

إذا ظهرت أخطاء (لا يظهر الجدول، لا يمكن رفع تقرير، تقارير لا تُحفظ، صلاحيات مفقودة)، يجب إصلاحها فورًا.

4) التقارير والتصدير PDF/Excel

بعد إدخال بيانات حقيقية (جدولة + تقارير):

من حساب مسؤول المشروع:

استعراض تقارير السائس لمشروعه.

تجربة تصدير التقارير إلى PDF و Excel.

التأكد أن الملفات تحتوي البيانات الصحيحة بتصميم PDF الجديد (البسيط والأنيق) وأن ملف Excel يفتح بدون مشاكل.

من حساب المدير العام:

استعراض تقارير كل المشاريع.

تصدير تقارير شاملة بصيغتي PDF و Excel.

إذا وجدت:

PDF ناقص بيانات

Excel غير منسّق أو ناقص

فشل في التصدير أو تحميل الملفات
يجب إصلاحه.

5) التحقق من الصلاحيات عمليًا

اختبر السيناريو التالي:

امنع صلاحية معيّنة عن السائس (مثلاً رؤية تقرير معين) من “إدارة الصلاحيات”.

تأكد بعد تسجيل الدخول أنه لم يعد يرى تلك الشاشة أو الزر.

امنح مسؤول المشروع صلاحية إضافية جديدة.

تأكد أنه بعد تسجيل الدخول يستطيع رؤية الشاشة الجديدة واستعمالها.

هذا للتأكد أن:

“إدارة الصلاحيات” ليست شكلية فقط

بل تتحكم فعليًا في الواجهة والـ backend.

6) إصلاح كل الأخطاء التي تظهر في هذا السيناريو

أي مشكلة تظهر في أي خطوة (404، 500، شاشة رمادية، عدم ظهور جدول اليوم، تقرير غير مربوط، صلاحية لا تعمل)
يجب إصلاحها فورًا من خلال تعديل الكود في:

routes

templates

models

permission logic

بدون القيام بأي refactor كبير أو إعادة تصميم كاملة.

7) المطلوب النهائي

بعد تنفيذ هذا السيناريو وتصحيح كل الأخطاء:

يجب أن يكون بإمكان:

المدير العام تشغيل النظام بالكامل وإدارة كل شيء.

مسؤول المشروع إدارة مشروعه، وجدولة السائسين، ومراجعة تقاريرهم.

السائس رؤية جدوله اليومي، ورفع تقارير فتراته وتقاريره اليومية.

الجميع استخدام التصدير إلى PDF و Excel بنجاح.

أعطني في النهاية تأكيدًا أن النظام أصبح مستقرًا، وأن مسار العمل الكامل يعمل من البداية إلى النهاية بدون أخطاء.