In the K9 Operations Management System, implement automatic project linking for all dog-related activities (training, feeding, veterinary care, incidents, etc.) so they are automatically associated with the project the dog is assigned to at the time of the activity.

1. Database Adjustments

In the ProjectAssignment table, ensure these fields exist:

assigned_from (datetime) — when the dog was assigned to the project.

assigned_to (nullable datetime) — when the assignment ended (null means still active).

Add project_id as a foreign key to:

Training records table.

Feeding records table.

Veterinary records table.

Incidents table.

Make project_id optional in these tables to allow for historical dogs not in any project.

2. Backend Logic

When creating a new record for a dog in any of these modules:

Check ProjectAssignment for an active assignment (assigned_from <= activity date <= assigned_to or assigned_to is null).

If found, auto-fill project_id in the new record with the active project’s ID.

If no active assignment, leave project_id null.

This logic should apply regardless of whether the record is created from the dog’s detail page or the module’s main form.

3. Frontend/UI

Do not require the user to manually select a project when logging an activity for a dog.

On detail pages for each module, display the linked project (if any) as a read-only field or badge.

4. Reporting

When viewing a project’s details, include all linked activities (training, feeding, veterinary, incidents) for the dogs assigned to it during the project period.

Ensure activities are filtered by date so only those within the dog’s assignment period appear.

5. Testing

Assign a dog to a project, log training, feeding, and vet activities → confirm they link to that project automatically.

Reassign the dog to a new project and log more activities → confirm new activities link to the new project, old ones remain linked to the old project.

Test with no active project → confirm project_id is null.