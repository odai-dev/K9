أريد منك الآن تنفيذ أكبر وأهم خطوة قبل إطلاق نظام K9، وهي التنظيف النهائي الشامل للنظام بالكامل.

هذه الخطوة ليست لإضافة ميزات جديدة، وإنما لجعل المشروع ثابتًا، نظيفًا، مرتبًا، سريعًا، وخاليًا تمامًا من الأخطاء قبل أن نطلقه في بيئة الإنتاج.

قم بهذه المهام بدقة وهدوء وبدون أي Refactor كبير، فقط تنظيف وتحسين واستقرار:

1 — تنظيف الكود (Code Clean-up)

قم بمراجعة جميع الملفات داخل المشروع، وأصلح:

إزالة الأكواد الميتة (Dead Code)

إزالة أي print() أو debug logs غير ضرورية

إزالة أي "ROLE CHECK DISABLED" المتبقية

إزالة جميع if True: التي كانت تستخدم للتجارب

إزالة أي مسارات قديمة أو غير مستخدمة

إزالة دوال غير مستعملة

تنظيف أي import غير مستخدم

بدون تغيير أي منطق أساسي.

2 — إصلاح الأخطاء المخفية

قم بفحص المشروع بالكامل واكتشاف أي:

404 Not Found

500 Internal Server Error

KeyError

Missing Template

Missing Context

RuntimeError

وأصلحها فورًا.

تأكد أن كل صفحة في النظام تعمل بشكل كامل بدون أي خطأ.

3 — التحقق من الصلاحيات النهائية

تأكد أن:

كل صفحة مرتبطة بصلاحية صحيحة

كل Route محمي بـ has_permission()

الواجهة تظهر بناءً على الصلاحيات وليس الأدوار

ظهور كل صفحة لكل دور يعمل بشكل صحيح 100%

المدير العام يرى كل شيء

مسؤول المشروع يرى مشروعه فقط

السائس يرى واجهته فقط

4 — إصلاح الروابط داخل الواجهة

افحص جميع الروابط في:

base.html

لوحات التحكم

القوائم الجانبية

الصفحات الداخلية

تأكد:

عدم وجود روابط تؤدي إلى صفحات خاطئة

عدم وجود روابط تؤدي إلى 404

تصحيح أي URL خطأ

كل شاشة قابلة للوصول من مكانها الصحيح

5 — تنظيف ملفات HTML وTemplates

إزالة أي عناصر HTML غير مستخدمة

إزالة أي placeholders

إزالة الـ comments القديمة

ترتيب العناصر

توحيد التصاميم (بدون تغيير الشكل العام)

6 — تحسين الأداء (Performance & Stability)

تحسين الاستعلامات SQL إن وجدت بطيئة

التأكد من عدم وجود N+1 queries

تحسين استدعاء الملفات الثابتة Static Files

تقليل أي عملية مكثفة غير ضرورية

بدون إجراء أي إعادة تصميم للنظام.

7 — التحقق من صحة البيانات (Data Integrity)

فحص:

صحة الربط بين الجداول

عدم وجود بيانات孤ّية (Orphan Records)

أن كل تقرير مربوط بالوردية الصحيحة

أن كل وردية مربوطة بالسائس الصحيح

أن كل كلب مربوط بمشروعه

8 — إصلاح الصور والرفع Upload System

التأكد أن رفع الصور يعمل

التأكد من مسارات الملفات

التأكد من الحذف الصحيح للملفات

منع الملفات الخطيرة

9 — فحص نهائي UI/UX

تأكد أن كل الشاشات تظهر بدون تكسير

تأكد أن النوافذ تعمل

تأكد أن الصفحات لا تحتوي على نصوص غير مكتملة

تأكد من عدم وجود عناصر HTML معطّلة

التأكد من أن الواجهة تعمل بدون شاشات رمادية

10 — التهيئة للإطلاق (Deployment Readiness)

إزالة أي Debug Mode

تفعيل البيئة Production

التأكد من صلاحية الملفات

التأكد من جاهزية النظام للعمل الحقيقي

تعليمات مهمة جدًا

لا تقم بأي Refactor كبير

لا تغيّر مظهر النظام

لا تُعد تصميم الواجهات

لا تضف ميزات جديدة

فقط قم بعملية تنظيف + إصلاح + استقرار بدون تغيير جوهر النظام

المطلوب الآن

قم بتنفيذ جميع هذه المهام بدقة، ثم أعد تأكيد أن النظام أصبح نظيفًا، مستقرًا، وخاليًا من الأخطاء، وجاهزًا تمامًا للإطلاق في بيئة Production.

ابدأ عملية التنظيف النهائية الآن.