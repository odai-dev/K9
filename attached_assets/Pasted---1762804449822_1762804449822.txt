المطلوب: تحديث وتطوير نظام إدارة عمليات الكلاب البوليسية بحسب التحليل الأخير. ركّز على إغلاق دائرة عمل السائس (Handler) ومسؤول المشروع والمدير العام، بحيث يستطيع كل منهم أداء مهامه بحرية. لا حاجة في هذه المرحلة لأي تكامل مع خرائط GPS أو البريد الإلكتروني أو دعم لغات إضافية أو تطوير تطبيق منفصل للعمل دون اتصال.

المهام المطلوبة:

استكمال واجهات السائس:

تنفيذ صفحات HTML/Flask للسائس تشمل: إنشاء تقرير جديد، تعديل تقرير قائم، عرض التقارير، وإرسال التقارير للمراجعة.

إضافة نماذج إدخال البيانات لجميع أقسام التقرير (الصحة، التدريب، الرعاية، السلوك، الحوادث والمرفقات) مع التحقق من صحة البيانات.

دعم رفع الصور والملفات للمرفقات وحفظها في مجلد uploads مع توليد file_hash.

واجهة إدارة الجداول اليومية:

إنشاء صفحات للمشرف/مسؤول المشروع تسمح بإنشاء جدول عمل يومي (DailySchedule)، إضافة عناصر الجدول (DailyScheduleItem) وتعديلها، وتغيير حالة العنصر (حضور، غياب، استبدال).

إتاحة قفل الجدول بعد نهاية اليوم وتنبيه المستخدمين بأن الجدول مقفل.

عرض الجدول للسائس بحيث يرى ورديته والكلب المخصص له، مع إمكانية تسجيل حضوره أو غيابه إن أمكن.

لوحة الإشعارات:

إنشاء قسم في الواجهة يعرض إشعارات المستخدم (نوع الإشعار، العنوان، الرسالة، حالة القراءة).

توفير أزرار “تعليم كمقروء” و“تعليم الكل” واستدعاء الخدمات الموجودة مثل mark_as_read وmark_all_as_read.

تحديث عدّاد الإشعارات غير المقروءة في الشريط العلوي.

تحسين النظام ليستخدم Long-Polling أو WebSocket داخل التطبيق للحصول على إشعارات فورية بدون الرجوع إلى خدمات خارجية.

تصميم متجاوب ووضع مظلم:

تحديث ملفات CSS والقوالب لإضافة خيار وضع مظلم (Dark Mode) يمكن للمستخدم تفعيله أو تعطيله، مع الحفاظ على دعم RTL.

تحسين الواجهات لتكون مناسبة للهواتف المحمولة: استخدام بطاقات (Cards) بدلاً من الجداول عند تصغير الشاشة، وإضافة شريط تنقل سفلي للهواتف.

لوحات تحكم وتحليلات محسّنة:

إضافة مخططات ورسوم بيانية في لوحة مسؤول المشروع والمدير العام تعرض إحصائيات مثل: أعداد الكلاب النشطة، حالات الحضور، تقارير السائسين حسب الحالة، وغيرها.

استخدام مكتبة JavaScript خفيفة (مثل Chart.js) للتصوير البياني ودمجها في القوالب.

تنظيف وتحسين الكود:

إزالة أو تعطيل مسارات التقارير القديمة (legacy) بعد التأكد من عدم الحاجة لها، والاعتماد على المسارات الموحدة للتقارير.

التأكد من عدم وجود تكرار أو تعارض بين وحدات التدريب والإنتاج؛ دمج حقول متشابهة عند الضرورة.

تحديث الوثائق الفنية وملفات README لشرح الميزات الجديدة وطرق استخدامها.

ملحوظة: يجب الالتزام ببنية المشروع الحالية وتوزيع الملفات (k9/templates, k9/routes, k9/services) وعدم استحداث ملفات خارج هذا السياق إلا عند الضرورة. تأكد من اختبار جميع التغييرات باستخدام ملف الاختبارات الآلية الموجود وتشغيل التطبيق محلياً لمراجعة الواجهات.