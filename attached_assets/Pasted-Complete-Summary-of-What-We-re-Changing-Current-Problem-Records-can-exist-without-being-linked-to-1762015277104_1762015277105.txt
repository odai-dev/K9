Complete Summary of What We're Changing
Current Problem:
Records can exist without being linked to a project (project_id is optional/nullable)
GENERAL_ADMIN can't easily add records because they're not project-scoped
GENERAL_ADMIN users aren't registered as employees/PMs in the system
What We Want to Achieve:
1. Mandatory Project Association
Change: Every record MUST be linked to a project
How: Change all project_id fields from nullable=True to nullable=False in models like:
DailySchedule
HandlerReport
FeedingLog
ExcretionLog
GroomingLog
And any other models with optional project_id
2. Dual-Mode Login for GENERAL_ADMIN
Change: When GENERAL_ADMIN logs in, show a blocking modal asking:
"Login as General Admin?" (full system access)
"Login as Project Manager?" (project-scoped, works within assigned project)
How:
Store choice in session (admin_mode)
Add navbar option to switch modes without re-logging
When in PM mode, treat them exactly like a regular PROJECT_MANAGER (project scoping applies)
3. GENERAL_ADMIN as Employee/PM
Change: Every GENERAL_ADMIN is also recorded as an Employee with PROJECT_MANAGER role
Why: So they can be assigned to a project and work within that project when in PM mode
4. Enhanced Setup Process
Change: /auth/setup route collects:
User credentials (username, email, password) → creates User with GENERAL_ADMIN role
Employee info (employee_id, full name, phone, hire_date, etc.) → creates Employee with PROJECT_MANAGER role
Links User and Employee together
Note: NO project assignment during setup (project doesn't exist yet)
5. Complete Workflow After Changes:
First Time Setup:

Admin runs /auth/setup
Enters user credentials + employee information
System creates both User (GENERAL_ADMIN) and Employee (PROJECT_MANAGER role)
Setup complete
First Login:
5. Admin logs in → goes to dashboard (no modal yet, no project assigned)

Admin creates a new project
Admin assigns themselves as PM to that project
Subsequent Logins:
8. Admin logs in → Modal appears: "How do you want to login?"

Option 1: General Admin (unrestricted access)
Option 2: Project Manager (scoped to assigned project)
Admin makes choice → session stores it
Admin can switch modes anytime via navbar without re-logging
When Creating Records:

All forms require project selection
Records cannot be saved without a project
In PM mode: automatically uses their assigned project
In General Admin mode: can choose any project
6. Database Changes:
Drop existing database (no data to preserve)
Recreate with new schema where project_id is mandatory
Run migrations with updated models